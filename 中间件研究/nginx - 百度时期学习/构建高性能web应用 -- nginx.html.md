---
author: zouzq7@163.com
content-class: yinxiang.markdown
created: "2020-12-21 13:40:55 +0000"
exporter-version: Evernote Mac 9.6.4 (470194)
source: desktop.mac
title: 构建高性能web应用 \-- nginx
updated: "2020-12-21 14:03:16 +0000"
---

:::  
### 前言  

说到高性能优化，最常见的两个方面是就是针对存储&IO的优化，落地过程大多很粗暴
首先选用高性能的工具，比如优秀的接网络IO处理专家：nginx，高效的kv对象存储数据库：redis、memcache、levelDB，其次优化我们的代码：相对高效的网络编程库、本地缓存、反应式编程风格。性能优化说白了就是针对各种瓶颈尽可能的少犯错，然后再充分利用我们的操作系统，充分发挥我们的硬件资源性能。\
存储之前介绍过一部分，核心思想：不存（寄存器） \> 内存 \> 磁盘（ssd \>
机械硬盘， 顺序读写 \>
随机读写），然后介绍了常见的KV存储工具，并且顺道说了一下各个方案之间的差异（可用性方案、热点处理、存储利用结构等）

### 目录  

这篇要说的是nginx相关：\
1、nginx是个啥？定位&整体实现思路\
2、nginx为何性能这么强\
3、nginx+lua应用\
4、nginx+lua构建高性能唯一单号服务\
5、nginx+lua构建异步化处理架构\
6、类似的应用\
7、lua的协程 & go中的协程 对比

### nginx是个啥？定位&整体实现思路  

#### 定位  

nginx的定位为是一个http的反向代理服务器，同时也是pop3、IMAP、SMTP的代理服务器。这里的正向代理：代理客户端请求替客户端完成资源请求比如VPN；反向代理：代理服务器端请求，替服务器端受理并内部转发对外是一个整体的服务器。正向代理通常用于一些受限资源的访问、内部缓存、客户端授权、统一对外出口控制等，反向代理通常是服务器端的负载均衡、接入层安全控制等，这其实就是nginx的两大核心用途，由于其高效的网络链接处理能力、丰富的扩展模块，nginx在这反向代理服务器中表现颇为出色。\
![](%E6%9E%84%E5%BB%BA%E9%AB%98%E6%80%A7%E8%83%BDweb%E5%BA%94%E7%94%A8%20--%20nginx.resources/256EF1A0-3D7A-46E6-9572-852DB1714C7A.png) 
 \
![](%E6%9E%84%E5%BB%BA%E9%AB%98%E6%80%A7%E8%83%BDweb%E5%BA%94%E7%94%A8%20--%20nginx.resources/5099755B-7D39-4500-A2E1-A28DFFF4F022.png) 
 \
nginx
经常被拿来同apache相对比，nginx相对apache有诸多的优势，比如更高效的网络链接处理能力、内少的内存占用等，给人的感觉像一把瑞士军刀，很轻量但很高效，并且在很多极端性能场景nginx也会被拿来直接做web服务使用，比如后面会提到的openrestry应用。

#### 整体实现思路&整体架构  

##### 功能架构图  

##### 多进程并发  

##### 多线程并发  

### nginx为何性能这么强  

#### 不得不提的epoll  

####   

#### nginx平滑重启  

### nginx+lua应用  

### nginx+lua构建高性能唯一单号服务  

### nginx+lua构建异步化处理架构  

### 类似的应用  

### lua的协程 & go中的协程 对比  
:::

 
